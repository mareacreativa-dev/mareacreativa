---
import { MousePointerClick } from "lucide-react";

export interface Props {
  title: string;
  description: string;
  image: string;
  url?: string;
  tags?: string[];
  pais?: string;
}

const {
  title,
  description,
  image,
  url,
  tags = [],
  pais = "EspaÃ±a",
} = Astro.props;

// Diccionario de banderas
const flags: Record<string, string> = {
  EspaÃ±a: "ğŸ‡ªğŸ‡¸",
  EEUU: "ğŸ‡ºğŸ‡¸",
  MÃ©xico: "ğŸ‡²ğŸ‡½",
  Colombia: "ğŸ‡¨ğŸ‡´",
  Argentina: "ğŸ‡¦ğŸ‡·",
  PerÃº: "ğŸ‡µğŸ‡ª",
  Chile: "ğŸ‡¨ğŸ‡±",
};

const TagComponent = url ? "a" : "div";
const linkProps = url
  ? { href: url, target: "_blank", rel: "noopener noreferrer" }
  : {};
---

<TagComponent
  {...linkProps}
  class={`group relative bg-white border border-gray-100 rounded-[24px] overflow-hidden shadow-sm hover:shadow-xl transition-all duration-300 flex flex-col h-full ${
    url ? "cursor-pointer" : ""
  }`}
>
  <div class="relative w-full aspect-video overflow-hidden bg-gray-50">
    <img
      src={image}
      alt={title}
      class="w-full h-full object-cover object-top transition-transform duration-700 ease-out group-hover:scale-105"
      draggable="false"
      loading="lazy"
    />
  </div>

  <div class="p-6 flex flex-col flex-grow">
    <div class="flex items-center justify-between mb-2">
      <h2 class="text-xl font-bold tracking-tight text-gray-900">{title}</h2>
      {
        flags[pais] && (
          <span class="text-xl" title={pais}>
            {flags[pais]}
          </span>
        )
      }
    </div>

    <p class="text-gray-500 mb-4 text-sm leading-relaxed flex-grow">
      {description}
    </p>

    {
      tags.length > 0 && (
        <div class="flex flex-wrap gap-2 mb-4 mt-auto">
          {tags.map((tag) => (
            <span class="bg-gray-50 text-gray-600 border border-gray-100 font-medium text-[10px] px-2.5 py-1 rounded-full">
              {tag}
            </span>
          ))}
        </div>
      )
    }

    {
      url && (
        <div class="flex items-center justify-start gap-2 pt-4 border-t border-gray-50/80">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            class="w-4 h-4 text-blue-600"
            viewBox="0 0 24 24"
            fill="none"
            stroke="currentColor"
            stroke-width="1.5"
            stroke-linecap="round"
            stroke-linejoin="round"
          >
            <path d="M15 3h6v6" />
            <path d="M10 14 21 3" />
            <path d="M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6" />
          </svg>
          <span class="text-blue-600 font-semibold text-sm group-hover:translate-x-1 transition-transform">
            Visitar proyecto
          </span>
        </div>
      )
    }
  </div>
</TagComponent>
